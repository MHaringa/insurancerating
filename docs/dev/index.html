<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Analytic Insurance Rating Techniques • insurancerating</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Analytic Insurance Rating Techniques">
<meta property="og:description" content="Methods for insurance rating. It helps actuaries to implement GLMs within all relevent steps needed to construct a risk premium from raw data. 
    It provides a data driven strategy for the construction of insurance tariff classes. It also provides recipes on how to easily perform one-way, or 
    univariate, analyses on an insurance portfolio. In addition it adds functionality to include reference categories in the levels of the coefficients 
    in the output of a generalized linear regression analysis.">
<meta property="og:image" content="/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">insurancerating</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.6.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/vignette.html">Introduction to `insurancerating`</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mharinga/insurancerating/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="insurancerating" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#insurancerating" class="anchor"></a>insurancerating</h1></div>
<!-- badges: start -->

<p>The goal of <code>insurancerating</code> is to give analytic techniques that can be used in insurance rating. It helps actuaries to implement GLMs within all relevent steps needed to construct a risk premium from raw data. It provides a data driven strategy for the construction of tariff classes in P\&amp;C insurance. The goal is to bin the continuous factors such that categorical risk factors result which capture the effect of the covariate on the response in an accurate way, while being easy to use in a generalized linear model (GLM).</p>
<p><code>insurancerating</code> also provides recipes on how to easily perform univariate analyses on an insurance portfolio. In addition it adds functionality to include reference categories in the levels of the coefficients in the output of a generalized linear regression analysis.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install insurancerating from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"insurancerating"</span>)</pre></div>
<p>Or the development version from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="co"># install.packages("remotes")</span>
<span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"MHaringa/insurancerating"</span>)</pre></div>
</div>
<div id="example-1" class="section level2">
<h2 class="hasAnchor">
<a href="#example-1" class="anchor"></a>Example 1</h2>
<p>This is a basic example which shows the techniques provided in insurancerating.</p>
<p>The first part shows how to fit a GAM for the variable <em>age_policyholder</em> in the MTPL dataset:</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">insurancerating</span>)

<span class="co"># Claim frequency </span>
<span class="no">age_policyholder_frequency</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/fit_gam.html">fit_gam</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">MTPL</span>,
                                      <span class="kw">nclaims</span> <span class="kw">=</span> <span class="no">nclaims</span>,
                                      <span class="kw">x</span> <span class="kw">=</span> <span class="no">age_policyholder</span>,
                                      <span class="kw">exposure</span> <span class="kw">=</span> <span class="no">exposure</span>)

<span class="co"># Claim severity </span>
<span class="no">age_policyholder_severity</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/fit_gam.html">fit_gam</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">MTPL</span>,
                                     <span class="kw">nclaims</span> <span class="kw">=</span> <span class="no">nclaims</span>,
                                     <span class="kw">x</span> <span class="kw">=</span> <span class="no">age_policyholder</span>,
                                     <span class="kw">exposure</span> <span class="kw">=</span> <span class="no">exposure</span>,
                                     <span class="kw">amount</span> <span class="kw">=</span> <span class="no">amount</span>,
                                     <span class="kw">model</span> <span class="kw">=</span> <span class="st">"severity"</span>)</pre></div>
<p>Create plot:</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(<span class="no">age_policyholder_frequency</span>, <span class="kw">show_observations</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
<p><img src="reference/figures/plotgam-1.png"><!-- --></p>
<p>Determine classes for the claim frequency (the points show the ratio between the observed number of claims and exposure for each age):</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="no">clusters_freq</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/construct_tariff_classes.html">construct_tariff_classes</a></span>(<span class="no">age_policyholder_frequency</span>)
<span class="no">clusters_sev</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/construct_tariff_classes.html">construct_tariff_classes</a></span>(<span class="no">age_policyholder_severity</span>)

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(<span class="no">clusters_freq</span>, <span class="kw">show_observations</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
<p><img src="reference/figures/figfreq-1.png"><!-- --></p>
<p>The figure shows that younger policyholders have a higher risk profile. The fitted GAM is lower than might be expected from the observed claim frequency for policyholders of age 19. This is because there are very few young policyholders of age 19 present in the portfolio.</p>
<p>The GAM for the claim severity :</p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="no">age_policyholder_severity</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(<span class="no">.</span>, <span class="kw">show_observations</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">remove_outliers</span> <span class="kw">=</span> <span class="fl">100000</span>)</pre></div>
<p><img src="reference/figures/figsev-1.png"><!-- --></p>
<p>The second part adds the constructed tariff classes for the variable <code>age_policyholder</code> to the dataset, and sets the base level of the factor <code>age_policyholder</code> to the level with the largest exposure. In this example for claim frequency the class for ages (39,50], which contains the largest exposure.</p>
<div class="sourceCode" id="cb7"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)

<span class="no">dat</span> <span class="kw">&lt;-</span> <span class="no">MTPL</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">age_policyholder_freq_cat</span> <span class="kw">=</span> <span class="no">clusters_freq</span>$<span class="no">tariff_classes</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_if</a></span>(<span class="no">is.character</span>, <span class="no">as.factor</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_if</a></span>(<span class="no">is.factor</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(~<span class="fu"><a href="reference/biggest_reference.html">biggest_reference</a></span>(<span class="no">.</span>, <span class="no">exposure</span>)))

<span class="fu"><a href="https://dplyr.tidyverse.org/reference/reexports.html">glimpse</a></span>(<span class="no">dat</span>)</pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co">## Observations: 32,731</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">## Variables: 5</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">## $ age_policyholder          &lt;int&gt; 43, 21, 54, 44, 20, 38, 68, 45, 76, 30, 28,…</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">## $ nclaims                   &lt;int&gt; 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0…</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">## $ exposure                  &lt;dbl&gt; 1.0000000, 1.0000000, 1.0000000, 1.0000000,…</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">## $ amount                    &lt;dbl&gt; 0, 0, 0, 57540, 2057, 0, 0, 6510, 0, 0, 0, …</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">## $ age_policyholder_freq_cat &lt;fct&gt; "(39,50]", "[18,25]", "(50,57]", "(39,50]",…</span></a></code></pre></div>
<p>The last part is to fit a <em>generalized linear model</em>. <code><a href="reference/rating_factors.html">rating_factors()</a></code> prints the output including the reference group.</p>
<div class="sourceCode" id="cb9"><pre class="r"><span class="no">model_freq1</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span>(<span class="no">nclaims</span> ~ <span class="no">age_policyholder_freq_cat</span>, <span class="kw">offset</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span>(<span class="no">exposure</span>),
                  <span class="kw">family</span> <span class="kw">=</span> <span class="st">"poisson"</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">dat</span>)

<span class="no">model_freq2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span>(<span class="no">nclaims</span> ~ <span class="no">age_policyholder_freq_cat</span> + <span class="no">age_policyholder</span>, <span class="kw">offset</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span>(<span class="no">exposure</span>),
                  <span class="kw">family</span> <span class="kw">=</span> <span class="st">"poisson"</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">dat</span>)

<span class="no">x</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/rating_factors.html">rating_factors</a></span>(<span class="no">model_freq1</span>, <span class="no">model_freq2</span>)
<span class="no">x</span></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co">##                  risk_factor            level est_model_freq1 est_model_freq2</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">## 1                (Intercept)      (Intercept)       0.1368181       0.3210287</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">## 2  age_policyholder_freq_cat          (39,50]       1.0000000       1.0000000</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">## 3  age_policyholder_freq_cat          [18,25]       1.9438228       1.2909603</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">## 4  age_policyholder_freq_cat          (25,32]       1.3234995       0.9802830</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">## 5  age_policyholder_freq_cat          (32,39]       1.0568538       0.8923472</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">## 6  age_policyholder_freq_cat          (50,57]       0.8919696       1.0535866</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">## 7  age_policyholder_freq_cat          (57,64]       0.7423998       1.0056607</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">## 8  age_policyholder_freq_cat          (64,71]       0.7379362       1.1383509</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">## 9  age_policyholder_freq_cat          (71,83]       0.7021348       1.2486752</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">## 10 age_policyholder_freq_cat          (83,95]       0.6933378       1.5100830</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">## 11          age_policyholder age_policyholder              NA       0.9811935</span></a></code></pre></div>
<p><code><a href="reference/autoplot.riskfactor.html">autoplot.riskfactor()</a></code> creates a figure. The base level of the factor <code>age_policyholder_freq_cat</code> is the group with the largest exposure and is shown first.</p>
<div class="sourceCode" id="cb11"><pre class="r"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(<span class="no">x</span>)</pre></div>
<p><img src="reference/figures/example3a1-1.png"><!-- --></p>
<p>Include <code>model_data</code> to sort the clustering in the original order. Ordering the factor <code>age_policyholder_freq_cat</code> only works when <code><a href="reference/biggest_reference.html">biggest_reference()</a></code> is used to set the base level of the factor to the level with the largest exposure.</p>
<div class="sourceCode" id="cb12"><pre class="r"><span class="fu"><a href="reference/rating_factors.html">rating_factors</a></span>(<span class="no">model_freq1</span>, <span class="no">model_freq2</span>, <span class="kw">model_data</span> <span class="kw">=</span> <span class="no">dat</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>()</pre></div>
<p><img src="reference/figures/example3b-1.png"><!-- --></p>
<p>The following graph includes the exposure as a bar graph and shows some more options:</p>
<div class="sourceCode" id="cb13"><pre class="r"><span class="fu"><a href="reference/rating_factors.html">rating_factors</a></span>(<span class="no">model_freq1</span>, <span class="no">model_freq2</span>, <span class="kw">model_data</span> <span class="kw">=</span> <span class="no">dat</span>, <span class="kw">exposure</span> <span class="kw">=</span> <span class="no">exposure</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(<span class="no">.</span>, <span class="kw">linetype</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">color_bg</span> <span class="kw">=</span> <span class="st">"skyblue"</span>)</pre></div>
<p><img src="reference/figures/example3c-1.png"><!-- --></p>
</div>
<div id="example-2" class="section level2">
<h2 class="hasAnchor">
<a href="#example-2" class="anchor"></a>Example 2</h2>
<p>This is a basic example which shows how to easily perform an univariate analysis on a MTPL portfolio using <code>insurancerating</code>.</p>
<p>An univariate analysis consists in the evaluation of overall claim frequency, severity and risk premium. Its main purpose lies in verifying the experience data reasonableness using previous experience comparison and professional judgement.</p>
<p><code><a href="reference/univariate.html">univariate()</a></code> shows the basic risk indicators split by the levels of the discrete risk factor:</p>
<div class="sourceCode" id="cb14"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">insurancerating</span>)
<span class="fu"><a href="reference/univariate.html">univariate</a></span>(<span class="no">MTPL2</span>,
           <span class="kw">x</span> <span class="kw">=</span> <span class="no">area</span>, <span class="co"># discrete risk factor</span>
           <span class="kw">nclaims</span> <span class="kw">=</span> <span class="no">nclaims</span>, <span class="co"># number of claims</span>
           <span class="kw">exposure</span> <span class="kw">=</span> <span class="no">exposure</span>,
           <span class="kw">premium</span> <span class="kw">=</span> <span class="no">premium</span>,
           <span class="kw">severity</span> <span class="kw">=</span> <span class="no">amount</span>) <span class="co"># loss</span></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co">##   area  amount nclaims   exposure premium  frequency average_severity</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co">## 1    2 4063270      98  818.53973   51896 0.11972540         41461.94</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">## 2    3 7945311     113  764.99178   49337 0.14771401         70312.49</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co">## 3    1 6896187     146 1065.74795   65753 0.13699299         47234.16</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">## 4    0    6922       1   13.30685     902 0.07514927          6922.00</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co">##   risk_premium loss_ratio average_premium</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="co">## 1    4964.0474  78.296400        63.40071</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="co">## 2   10386.1390 161.041632        64.49350</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="co">## 3    6470.7486 104.880188        61.69658</span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="co">## 4     520.1832   7.674058        67.78464</span></a></code></pre></div>
<p>The following indicators are calculated:</p>
<ol>
<li>frequency (i.e. frequency = number of claims / expsore)</li>
<li>average_severity (i.e. average severity = severity / number of claims)</li>
<li>risk_premium (i.e. risk premium = severity / exposure = frequency x average severity)</li>
<li>loss_ratio (i.e. loss ratio = severity / premium)</li>
<li>average_premium (i.e. average premium = premium / exposure)</li>
</ol>
<p>The term risk premium is used here as an equivalent of pure premium and burning cost.</p>
<p><code><a href="reference/univariate.html">univariate()</a></code> ignores missing input arguments, for instance only the claim frequency is calculated when <code>premium</code> and <code>severity</code> are unknown:</p>
<div class="sourceCode" id="cb16"><pre class="r"><span class="fu"><a href="reference/univariate.html">univariate</a></span>(<span class="no">MTPL2</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="no">area</span>, <span class="kw">nclaims</span> <span class="kw">=</span> <span class="no">nclaims</span>, <span class="kw">exposure</span> <span class="kw">=</span> <span class="no">exposure</span>)</pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co">##   area nclaims   exposure  frequency</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="co">## 1    2      98  818.53973 0.11972540</span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="co">## 2    3     113  764.99178 0.14771401</span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co">## 3    1     146 1065.74795 0.13699299</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="co">## 4    0       1   13.30685 0.07514927</span></a></code></pre></div>
<p>However, the above table is small and easy to understand, the same information might be presented more effectively with a graph, as shown below.</p>
<div class="sourceCode" id="cb18"><pre class="r"><span class="fu"><a href="reference/univariate.html">univariate</a></span>(<span class="no">MTPL2</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="no">area</span>, <span class="kw">nclaims</span> <span class="kw">=</span> <span class="no">nclaims</span>, <span class="kw">exposure</span> <span class="kw">=</span> <span class="no">exposure</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(<span class="no">.</span>)</pre></div>
<p><img src="reference/figures/example6-1.png"><!-- --></p>
<p>In <code><a href="reference/autoplot.univariate.html">autoplot.univariate()</a></code>, <code>show_plots</code> defines the plots to show and also the order of the plots. The following plots are available:</p>
<ol>
<li>frequency</li>
<li>average_severity</li>
<li>risk_premium</li>
<li>loss_ratio</li>
<li>average_premium</li>
<li>exposure</li>
<li>severity</li>
<li>nclaims</li>
<li>premium</li>
</ol>
<p>For example, to show the exposure and claim frequency plots:</p>
<div class="sourceCode" id="cb19"><pre class="r"><span class="fu"><a href="reference/univariate.html">univariate</a></span>(<span class="no">MTPL2</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="no">area</span>, <span class="kw">nclaims</span> <span class="kw">=</span> <span class="no">nclaims</span>, <span class="kw">exposure</span> <span class="kw">=</span> <span class="no">exposure</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(<span class="no">.</span>, <span class="kw">show_plots</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">6</span>,<span class="fl">1</span>))</pre></div>
<p><img src="reference/figures/example7-1.png"><!-- --></p>
<p>To remove the bars from the plot with the line graph, add <code>background = FALSE</code>:</p>
<div class="sourceCode" id="cb20"><pre class="r"><span class="fu"><a href="reference/univariate.html">univariate</a></span>(<span class="no">MTPL2</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="no">area</span>, <span class="kw">nclaims</span> <span class="kw">=</span> <span class="no">nclaims</span>, <span class="kw">exposure</span> <span class="kw">=</span> <span class="no">exposure</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(<span class="no">.</span>, <span class="kw">show_plots</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">6</span>,<span class="fl">1</span>), <span class="kw">background</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></div>
<p><img src="reference/figures/example8-1.png"><!-- --></p>
<p><code>sort</code> orders the levels of the risk factor into descending order by exposure:</p>
<div class="sourceCode" id="cb21"><pre class="r"><span class="fu"><a href="reference/univariate.html">univariate</a></span>(<span class="no">MTPL2</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="no">area</span>, <span class="kw">nclaims</span> <span class="kw">=</span> <span class="no">nclaims</span>, <span class="kw">exposure</span> <span class="kw">=</span> <span class="no">exposure</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(<span class="no">.</span>, <span class="kw">show_plots</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">6</span>,<span class="fl">1</span>), <span class="kw">background</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">sort</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
<p><img src="reference/figures/example9-1.png"><!-- --></p>
<p><code>sort_manual</code> in <code><a href="reference/autoplot.univariate.html">autoplot.univariate()</a></code> can be used to sort the levels of the discrete risk factor into your own ordering. This makes sense when the levels of the risk factor has a natural order, or when not all levels of the risk factor are desired in the output.</p>
<div class="sourceCode" id="cb22"><pre class="r"><span class="fu"><a href="reference/univariate.html">univariate</a></span>(<span class="no">MTPL2</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="no">area</span>, <span class="kw">nclaims</span> <span class="kw">=</span> <span class="no">nclaims</span>, <span class="kw">exposure</span> <span class="kw">=</span> <span class="no">exposure</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(<span class="no">.</span>, <span class="kw">show_plots</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">6</span>,<span class="fl">1</span>), <span class="kw">background</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">sort_manual</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"2"</span>, <span class="st">"3"</span>, <span class="st">"1"</span>, <span class="st">"0"</span>))</pre></div>
<p><img src="reference/figures/example10-1.png"><!-- --></p>
<p>The following graph shows some more options:</p>
<div class="sourceCode" id="cb23"><pre class="r"><span class="fu"><a href="reference/univariate.html">univariate</a></span>(<span class="no">MTPL2</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="no">area</span>, <span class="kw">nclaims</span> <span class="kw">=</span> <span class="no">nclaims</span>, <span class="kw">exposure</span> <span class="kw">=</span> <span class="no">exposure</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(<span class="no">.</span>, <span class="kw">show_plots</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">6</span>,<span class="fl">1</span>), <span class="kw">background</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">sort</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">ncol</span> <span class="kw">=</span> <span class="fl">2</span>,
           <span class="kw">color_bg</span> <span class="kw">=</span> <span class="st">"dodgerblue"</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"blue"</span>)</pre></div>
<p><img src="reference/figures/example11-1.png"><!-- --></p>
<p>Or create a bar graph for the number of claims:</p>
<div class="sourceCode" id="cb24"><pre class="r"><span class="fu"><a href="reference/univariate.html">univariate</a></span>(<span class="no">MTPL2</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="no">area</span>, <span class="kw">nclaims</span> <span class="kw">=</span> <span class="no">nclaims</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(<span class="no">.</span>, <span class="kw">coord_flip</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">sort</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
<p><img src="reference/figures/example12-1.png"><!-- --></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=insurancerating">https://​cloud.r-project.org/​package=insurancerating</a>
</li>
<li>Browse source code at <br><a href="https://github.com/mharinga/insurancerating/">https://​github.com/​mharinga/​insurancerating/​</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 2)</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Martin Haringa <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=insurancerating"><img src="https://www.r-pkg.org/badges/version/insurancerating" alt="CRAN Status"></a></li>
<li><a href="https://cran.rstudio.com/package=insurancerating"><img src="https://cranlogs.r-pkg.org/badges/insurancerating?color=blue" alt="Downloads"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Martin Haringa.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
