<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Construct insurance tariff classes — construct_tariff_classes • insurancerating</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Open_Sans-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Construct insurance tariff classes — construct_tariff_classes"><meta name="description" content="Constructs insurance tariff classes to fitgam objects
produced by fit_gam. The goal is to bin the continuous risk factors
such that categorical risk factors result which capture the effect of the
covariate on the response in an accurate way, while being easy to use in a
generalized linear model (GLM)."><meta property="og:description" content="Constructs insurance tariff classes to fitgam objects
produced by fit_gam. The goal is to bin the continuous risk factors
such that categorical risk factors result which capture the effect of the
covariate on the response in an accurate way, while being easy to use in a
generalized linear model (GLM)."><meta property="og:image" content="https://mharinga.github.io/insurancerating/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">insurancerating</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/mharinga/insurancerating/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Construct insurance tariff classes</h1>
      <small class="dont-index">Source: <a href="https://github.com/mharinga/insurancerating/blob/HEAD/R/gam_construct_tariff_classes.R" class="external-link"><code>R/gam_construct_tariff_classes.R</code></a></small>
      <div class="d-none name"><code>construct_tariff_classes.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Constructs insurance tariff classes to <code>fitgam</code> objects
produced by <code>fit_gam</code>. The goal is to bin the continuous risk factors
such that categorical risk factors result which capture the effect of the
covariate on the response in an accurate way, while being easy to use in a
generalized linear model (GLM).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">construct_tariff_classes</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  niterations <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>  ntrees <span class="op">=</span> <span class="fl">200</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>fitgam object produced by <code>fit_gam</code></p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>complexity parameter. The complexity parameter (alpha) is used
to control the number of tariff classes. Higher values for <code>alpha</code>
render less tariff classes. (<code>alpha</code> = 0 is default).</p></dd>


<dt id="arg-niterations">niterations<a class="anchor" aria-label="anchor" href="#arg-niterations"></a></dt>
<dd><p>in case the run does not converge, it terminates after a
specified number of iterations defined by niterations.</p></dd>


<dt id="arg-ntrees">ntrees<a class="anchor" aria-label="anchor" href="#arg-ntrees"></a></dt>
<dd><p>the number of trees in the population.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>an numeric seed to initialize the random number generator (for
reproducibility).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of class <code>constructtariffclasses</code> with components</p>
<dl><dt>prediction</dt>
<dd><p>data frame with predicted values</p></dd>

<dt>x</dt>
<dd><p>name of continuous risk factor for which tariff classes are
constructed</p></dd>

<dt>model</dt>
<dd><p>either 'frequency', 'severity' or 'burning'</p></dd>

<dt>data</dt>
<dd><p>data frame with predicted values and observed values</p></dd>

<dt>x_obs</dt>
<dd><p>observations for continuous risk factor</p></dd>

<dt>splits</dt>
<dd><p>vector with boundaries of the constructed tariff classes</p></dd>

<dt>tariff_classes</dt>
<dd><p>values in vector <code>x</code> coded according to which
constructed tariff class they fall</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Evolutionary trees are used as a technique to bin the <code>fitgam</code>
object produced by <code>fit_gam</code> into risk homogeneous categories.
This method is based on the work by Henckaerts et al. (2018). See Grubinger
et al. (2014) for more details on the various parameters that
control aspects of the evtree fit.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Antonio, K. and Valdez, E. A. (2012). Statistical concepts of a
priori and a posteriori risk classification in insurance. Advances in
Statistical Analysis, 96(2):187–224. doi:10.1007/s10182-011-0152-7.</p>
<p>Grubinger, T., Zeileis, A., and Pfeiffer, K.-P. (2014). evtree:
Evolutionary learning of globally optimal classification and regression trees
in R. Journal of Statistical Software, 61(1):1–29. doi:10.18637/jss.v061.i01.</p>
<p>Henckaerts, R., Antonio, K., Clijsters, M. and Verbelen, R.
(2018). A data driven binning strategy for the construction of insurance
tariff classes. Scandinavian Actuarial Journal, 2018:8, 681-705.
doi:10.1080/03461238.2018.1429300.</p>
<p>Wood, S.N. (2011). Fast stable restricted maximum likelihood and
marginal likelihood estimation of semiparametric
generalized linear models. Journal of the Royal Statistical Society (B)
73(1):3-36. doi:10.1111/j.1467-9868.2010.00749.x.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Martin Haringa</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="fit_gam.html">fit_gam</a></span><span class="op">(</span><span class="va">MTPL</span>, nclaims <span class="op">=</span> <span class="va">nclaims</span>,</span></span>
<span class="r-in"><span>x <span class="op">=</span> <span class="va">age_policyholder</span>, exposure <span class="op">=</span> <span class="va">exposure</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>   <span class="fu">construct_tariff_classes</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martin Haringa.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

