<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generalized additive model — fit_gam • insurancerating</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Generalized additive model — fit_gam" />
<meta property="og:description" content="Fits a generalized additive model (GAM) to continuous risk factors in one of the following three types of models: the number of reported claims
(claim frequency), the severity of reported claims (claim severity) or the burning cost (i.e. risk premium or pure premium)." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">insurancerating</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mharinga/insurancerating/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generalized additive model</h1>
    <small class="dont-index">Source: <a href='https://github.com/mharinga/insurancerating/blob/master/R/fit_gam.R'><code>R/fit_gam.R</code></a></small>
    <div class="hidden name"><code>fit_gam.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Fits a generalized additive model (GAM) to continuous risk factors in one of the following three types of models: the number of reported claims
(claim frequency), the severity of reported claims (claim severity) or the burning cost (i.e. risk premium or pure premium).</p>
    </div>

    <pre class="usage"><span class='fu'>fit_gam</span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>nclaims</span>,
  <span class='va'>x</span>,
  <span class='va'>exposure</span>,
  amount <span class='op'>=</span> <span class='cn'>NULL</span>,
  pure_premium <span class='op'>=</span> <span class='cn'>NULL</span>,
  model <span class='op'>=</span> <span class='st'>"frequency"</span>,
  round_x <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>data.frame of an insurance portfolio</p></td>
    </tr>
    <tr>
      <th>nclaims</th>
      <td><p>column in <code>data</code> with number of claims</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>column in <code>data</code> with continuous risk factor</p></td>
    </tr>
    <tr>
      <th>exposure</th>
      <td><p>column in <code>data</code> with exposure</p></td>
    </tr>
    <tr>
      <th>amount</th>
      <td><p>column in <code>data</code> with claim amount</p></td>
    </tr>
    <tr>
      <th>pure_premium</th>
      <td><p>column in <code>data</code> with pure premium</p></td>
    </tr>
    <tr>
      <th>model</th>
      <td><p>choose either 'frequency', 'severity' or 'burning' (model = 'frequency' is default). See details section.</p></td>
    </tr>
    <tr>
      <th>round_x</th>
      <td><p>round elements in column <code>x</code> to multiple of <code>round_x</code>. This gives a speed enhancement for data containing many levels for <code>x</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list with components</p>
<dt>prediction</dt><dd><p>data frame with predicted values</p></dd>
<dt>x</dt><dd><p>name of continuous risk factor</p></dd>
<dt>model</dt><dd><p>either 'frequency', 'severity' or 'burning'</p></dd>
<dt>data</dt><dd><p>data frame with predicted values and observed values</p></dd>
<dt>x_obs</dt><dd><p>observations for continuous risk factor</p></dd>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The 'frequency' specification uses a Poisson GAM for fitting the number of claims. The logarithm of the exposure is included
as an offset, such that the expected number of claims is proportional to the exposure.</p>
<p>The 'severity' specification uses a lognormal GAM for fitting the average cost of a claim. The average cost of a claim is defined as the
ratio of the claim amount and the number of claims. The number of claims is included as a weight.</p>
<p>The 'burning' specification uses a lognormal GAM for fitting the pure premium of a claim. The pure premium is obtained by multiplying the estimated frequency and
the estimated severity of claims. The word burning cost is used here as equivalent of risk premium and pure premium. Note that the functionality for fitting
a GAM for pure premium is still experimental (in the early stages of development).</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Antonio, K. and Valdez, E. A. (2012). Statistical concepts of a priori and a posteriori risk classification in insurance.
Advances in Statistical Analysis, 96(2):187–224. doi:10.1007/s10182-011-0152-7.</p>
<p>Grubinger, T., Zeileis, A., and Pfeiffer, K.-P. (2014). evtree: Evolutionary learning of globally
optimal classification and regression trees in R. Journal of Statistical Software, 61(1):1–29. doi:10.18637/jss.v061.i01.</p>
<p>Henckaerts, R., Antonio, K., Clijsters, M. and Verbelen, R. (2018). A data driven binning strategy for the construction of insurance tariff classes.
Scandinavian Actuarial Journal, 2018:8, 681-705. doi:10.1080/03461238.2018.1429300.</p>
<p>Wood, S.N. (2011). Fast stable restricted maximum likelihood and marginal likelihood estimation of semiparametric
generalized linear models. Journal of the Royal Statistical Society (B) 73(1):3-36. doi:10.1111/j.1467-9868.2010.00749.x.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Martin Haringa</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>fit_gam</span><span class='op'>(</span><span class='va'>MTPL</span>, nclaims <span class='op'>=</span> <span class='va'>nclaims</span>, x <span class='op'>=</span> <span class='va'>age_policyholder</span>, exposure <span class='op'>=</span> <span class='va'>exposure</span><span class='op'>)</span>
</div><div class='output co'>#&gt;            x  predicted     lwr_95    upr_95
#&gt; 1   18.00000 0.33683705 0.21781040 0.5209081
#&gt; 2   18.77778 0.32218997 0.21698662 0.4783999
#&gt; 3   19.55556 0.30817998 0.21568460 0.4403416
#&gt; 4   20.33333 0.29478165 0.21372588 0.4065779
#&gt; 5   21.11111 0.28197418 0.21093250 0.3769426
#&gt; 6   21.88889 0.26974205 0.20717072 0.3512117
#&gt; 7   22.66667 0.25807532 0.20239831 0.3290683
#&gt; 8   23.44444 0.24696930 0.19669877 0.3100875
#&gt; 9   24.22222 0.23642372 0.19028011 0.2937573
#&gt; 10  25.00000 0.22644165 0.18343007 0.2795388
#&gt; 11  25.77778 0.21702844 0.17644700 0.2669433
#&gt; 12  26.55556 0.20819044 0.16958063 0.2555908
#&gt; 13  27.33333 0.19993360 0.16300468 0.2452288
#&gt; 14  28.11111 0.19226234 0.15681941 0.2357158
#&gt; 15  28.88889 0.18517864 0.15107034 0.2269878
#&gt; 16  29.66667 0.17868117 0.14577063 0.2190219
#&gt; 17  30.44444 0.17276468 0.14091962 0.2118061
#&gt; 18  31.22222 0.16741962 0.13651454 0.2053212
#&gt; 19  32.00000 0.16263204 0.13255476 0.1995340
#&gt; 20  32.77778 0.15838349 0.12904044 0.1943990
#&gt; 21  33.55556 0.15465092 0.12596792 0.1898651
#&gt; 22  34.33333 0.15140695 0.12332514 0.1858831
#&gt; 23  35.11111 0.14862005 0.12108853 0.1824113
#&gt; 24  35.88889 0.14625487 0.11922234 0.1794168
#&gt; 25  36.66667 0.14427229 0.11768048 0.1768730
#&gt; 26  37.44444 0.14262987 0.11641068 0.1747544
#&gt; 27  38.22222 0.14128239 0.11535995 0.1730298
#&gt; 28  39.00000 0.14018239 0.11447950 0.1716561
#&gt; 29  39.77778 0.13928082 0.11372806 0.1705748
#&gt; 30  40.55556 0.13852786 0.11307267 0.1697136
#&gt; 31  41.33333 0.13787411 0.11248705 0.1689907
#&gt; 32  42.11111 0.13727167 0.11194807 0.1683237
#&gt; 33  42.88889 0.13667536 0.11143197 0.1676373
#&gt; 34  43.66667 0.13604407 0.11091147 0.1668717
#&gt; 35  44.44444 0.13534205 0.11035510 0.1659866
#&gt; 36  45.22222 0.13453992 0.10972876 0.1649612
#&gt; 37  46.00000 0.13361546 0.10899937 0.1637908
#&gt; 38  46.77778 0.13255422 0.10813962 0.1624809
#&gt; 39  47.55556 0.13134973 0.10713267 0.1610410
#&gt; 40  48.33333 0.13000323 0.10597508 0.1594794
#&gt; 41  49.11111 0.12852296 0.10467710 0.1578010
#&gt; 42  49.88889 0.12692325 0.10326012 0.1560090
#&gt; 43  50.66667 0.12522346 0.10175212 0.1541090
#&gt; 44  51.44444 0.12344655 0.10018246 0.1521130
#&gt; 45  52.22222 0.12161762 0.09857760 0.1500427
#&gt; 46  53.00000 0.11976256 0.09695867 0.1479297
#&gt; 47  53.77778 0.11790690 0.09534118 0.1458135
#&gt; 48  54.55556 0.11607463 0.09373643 0.1437362
#&gt; 49  55.33333 0.11428738 0.09215413 0.1417365
#&gt; 50  56.11111 0.11256383 0.09060508 0.1398444
#&gt; 51  56.88889 0.11091931 0.08910266 0.1380777
#&gt; 52  57.66667 0.10936563 0.08766282 0.1364414
#&gt; 53  58.44444 0.10791109 0.08630242 0.1349302
#&gt; 54  59.22222 0.10656065 0.08503682 0.1335324
#&gt; 55  60.00000 0.10531631 0.08387718 0.1322353
#&gt; 56  60.77778 0.10417745 0.08282849 0.1310291
#&gt; 57  61.55556 0.10314121 0.08188883 0.1299092
#&gt; 58  62.33333 0.10220313 0.08105032 0.1288765
#&gt; 59  63.11111 0.10135754 0.08030133 0.1279350
#&gt; 60  63.88889 0.10059811 0.07962946 0.1270884
#&gt; 61  64.66667 0.09991824 0.07902461 0.1263360
#&gt; 62  65.44444 0.09931152 0.07848142 0.1256702
#&gt; 63  66.22222 0.09877204 0.07800040 0.1250752
#&gt; 64  67.00000 0.09829468 0.07758724 0.1245288
#&gt; 65  67.77778 0.09787524 0.07725078 0.1240060
#&gt; 66  68.55556 0.09751063 0.07700007 0.1234846
#&gt; 67  69.33333 0.09719881 0.07684142 0.1229494
#&gt; 68  70.11111 0.09693873 0.07677604 0.1223965
#&gt; 69  70.88889 0.09673020 0.07679874 0.1218344
#&gt; 70  71.66667 0.09657374 0.07689774 0.1212843
#&gt; 71  72.44444 0.09647024 0.07705556 0.1207766
#&gt; 72  73.22222 0.09642076 0.07725076 0.1203478
#&gt; 73  74.00000 0.09642621 0.07745955 0.1200370
#&gt; 74  74.77778 0.09648712 0.07765661 0.1198838
#&gt; 75  75.55556 0.09660332 0.07781429 0.1199292
#&gt; 76  76.33333 0.09677375 0.07790047 0.1202195
#&gt; 77  77.11111 0.09699627 0.07787574 0.1208114
#&gt; 78  77.88889 0.09726760 0.07769195 0.1217756
#&gt; 79  78.66667 0.09758320 0.07729414 0.1231980
#&gt; 80  79.44444 0.09793730 0.07662748 0.1251733
#&gt; 81  80.22222 0.09832305 0.07564773 0.1277953
#&gt; 82  81.00000 0.09873263 0.07433108 0.1311448
#&gt; 83  81.77778 0.09915751 0.07267893 0.1352829
#&gt; 84  82.55556 0.09958874 0.07071599 0.1402500
#&gt; 85  83.33333 0.10001728 0.06848345 0.1460711
#&gt; 86  84.11111 0.10043439 0.06603031 0.1527642
#&gt; 87  84.88889 0.10083198 0.06340585 0.1603494
#&gt; 88  85.66667 0.10120300 0.06065455 0.1688587
#&gt; 89  86.44444 0.10154181 0.05781385 0.1783438
#&gt; 90  87.22222 0.10184440 0.05491416 0.1888817
#&gt; 91  88.00000 0.10210858 0.05198048 0.2005784
#&gt; 92  88.77778 0.10233412 0.04903472 0.2135685
#&gt; 93  89.55556 0.10252277 0.04609792 0.2280129
#&gt; 94  90.33333 0.10267806 0.04319190 0.2440917
#&gt; 95  91.11111 0.10280433 0.04033996 0.2619916
#&gt; 96  91.88889 0.10290626 0.03756567 0.2818982
#&gt; 97  92.66667 0.10298930 0.03489104 0.3039977
#&gt; 98  93.44444 0.10305920 0.03233509 0.3284728
#&gt; 99  94.22222 0.10312138 0.02991252 0.3555039
#&gt; 100 95.00000 0.10318029 0.02763269 0.3852745</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Martin Haringa.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


