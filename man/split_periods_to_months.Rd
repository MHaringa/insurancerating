% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/time_period_to_months.R
\name{split_periods_to_months}
\alias{split_periods_to_months}
\alias{period_to_months}
\title{Split periods into monthly intervals}
\usage{
split_periods_to_months(df, begin, end, cols = NULL)

period_to_months(df, begin, end, ...)
}
\arguments{
\item{df}{A \code{data.frame} or \code{data.table}.}

\item{begin}{Character string. Name of column in \code{df} with begin dates.}

\item{end}{Character string. Name of column in \code{df} with end dates.}

\item{cols}{Character vector with names of numeric columns in \code{df} to split.}

\item{...}{Columns in \code{df} to split. Deprecated, use \code{cols} instead.}
}
\value{
A \code{data.frame} with the same columns as in \code{df}, plus an \code{id} column.
}
\description{
Splits rows where the time period is longer than one month into multiple rows
with a time period of exactly one month each. Values in numeric columns (e.g.
exposure or premium) are divided proportionally over the months.

This function uses \strong{standard evaluation (SE)}: column names must be passed
as \strong{character strings} (e.g. \code{begin = "begin_date"}).
The older function \code{\link[=period_to_months]{period_to_months()}} used non-standard evaluation (NSE) and
is deprecated as of version 0.7.6.
}
\details{
In insurance portfolios it is common that rows relate to periods longer than
one month. This can be problematic when monthly exposures are needed.

Since insurance premiums are assumed constant over months (and not depending
on the number of days per month), the function assumes each month has 30 days.
}
\examples{
library(lubridate)
portfolio <- data.frame(
  begin_date = ymd(c("2014-01-01", "2014-01-01")),
  end_date   = ymd(c("2014-03-14", "2014-05-10")),
  exposure   = c(0.2025, 0.3583),
  premium    = c(125, 150)
)

# New SE interface
split_periods_to_months(portfolio,
  begin = "begin_date", end = "end_date",
  cols = c("premium", "exposure")
)

# Old NSE interface (deprecated)
\dontrun{
period_to_months(portfolio, begin_date, end_date, premium, exposure)
}

}
\author{
Martin Haringa
}
